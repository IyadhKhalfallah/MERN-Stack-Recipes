{"ast":null,"code":"import _defineProperty from \"/Users/macbookair/Desktop/my-app/client/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/macbookair/Desktop/my-app/client/src/RecipeApp.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n/*Tanzim Mokammel\nmtanzim@gmail.com\nNov 2017\n*/\nconst React = require('react').React;\n\nconst Component = require('react').Component; //import scrollToComponent from 'react-scroll-to-component';\n\n\nrequire('./style.css');\n\nconst axios = require('axios');\n\nconst loadProgressBar = require('axios-progress-bar').loadProgressBar;\n\nrequire('axios-progress-bar/dist/nprogress.css'); //loadProgressBar();\n\n\nclass RecipeApp extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.getFriendRecipe = id => {\n      //console.log (id);\n      axios.get(\"/api/\".concat(id)).then(res => {\n        this.setState({\n          friendUser: res.data.content,\n          pageCtrl: 1\n        });\n      }).catch(err => {\n        console.error(err);\n      });\n    };\n\n    this.toggleMyRecipe = () => {\n      this.setState({\n        pageCtrl: 0\n      });\n    };\n\n    this.toggleMyProfile = () => {\n      this.setState({\n        pageCtrl: 2\n      });\n    };\n\n    this.copyRecipe = recipe => {\n      this.addRecipeBase(recipe);\n      this.setState({\n        isError: true,\n        errMsg: \"Recipe copied!\"\n      });\n    };\n\n    this.addRecipeBase = newRecipe => {\n      //var newRecipe={title:this.state.newRecipeName, ingredients:[{}]};\n      //var newRecipe={title:this.state.newRecipeName};\n      axios.post(\"/api/\".concat(this.state.userID, \"/recipe\"), newRecipe).then(res => {\n        //console.log(res.data);\n        this.setState({\n          isError: res.data.isError,\n          errMsg: res.data.content.errors\n        });\n\n        if (res.data.isError === false) {\n          var updatedRecipe = res.data.content;\n          this.setState({\n            recipes: updatedRecipe,\n            newRecipeName: '',\n            isError: false\n          }); //console.log(this.state.recipes);\n        }\n      }).catch(err => {\n        console.error(err);\n      });\n    };\n\n    this.state = {\n      isLoggedIn: true,\n      isProduction: true,\n      //use this variable to control url type\n      //app_url: 'https://fccwebapps-mtanzim.c9users.io',\n      loginMethod: \"\",\n      loginIcon: \"fa fa-user\",\n      isError: true,\n      errMsg: \"Facebook log in is currently unavailable. I've requested assistance from Facebook, and awaiting feedback.\",\n      user: '',\n      userID: '',\n      friendUser: {},\n      recipes: [],\n      //friendRecipes: [],\n      recipeToCopy: {},\n      newRecipeName: '',\n      newIng: {\n        title: '',\n        qty: '',\n        unit: ''\n      },\n      editing: false,\n      pageCtrl: 0 //allows users to toggle between pages\n      //addRecipeStyleState: {display:'none'}\n\n    };\n    this.eachRecipe = this.eachRecipe.bind(this);\n    this.addIngredient = this.addIngredient.bind(this);\n    this.delAllIngredient = this.delAllIngredient.bind(this);\n    this.delIngredient = this.delIngredient.bind(this);\n    this.addRecipe = this.addRecipe.bind(this);\n    this.remRecipe = this.remRecipe.bind(this);\n    this.removeAll = this.removeAll.bind(this);\n    this.handleAddRecipe = this.handleAddRecipe.bind(this);\n    this.handleAddIngTitle = this.handleAddIngTitle.bind(this);\n    this.handleAddIngQty = this.handleAddIngQty.bind(this);\n    this.handleAddIngUnit = this.handleAddIngUnit.bind(this);\n    this.editRecipName = this.editRecipName.bind(this);\n    this.toggleAddRecipe = this.toggleAddRecipe.bind(this);\n    this.editIngredient = this.editIngredient.bind(this); //this.setLoginMethod = this.setLoginMethod.bind(this);\n\n    this.handleError = this.handleError.bind(this); //this.renderAddRecipeForm = this.renderAddRecipeForm.bind(this);\n  }\n\n  componentDidMount() {\n    loadProgressBar();\n    axios.get('/getCurUser') //axios.get(`/api/${this.state.userID}`)\n    .then(res => {\n      ////console.log(res.data);\n      ////console.log((typeof(res.data)==='object') && res.data.user.id!==undefined);\n      if (typeof res.data === 'object' && res.data._id !== undefined) {\n        //console.log('User found');\n        //console.log(res.data);\n        //this.setState({userID:res.data._id});\n        this.setState({\n          isLoggedIn: true,\n          isError: false,\n          recipes: res.data.recipes,\n          userID: res.data._id,\n          user: res.data.displayName.name,\n          loginMethod: res.data.displayName.type\n        });\n\n        if (this.state.loginMethod === 'git') {\n          this.setState({\n            loginIcon: \"fa fa-github\"\n          });\n        } else if (this.state.loginMethod === 'fb') {\n          this.setState({\n            loginIcon: \"fa fa-facebook\"\n          });\n        }\n      }\n    }).catch(err => {\n      console.error(err);\n    });\n  }\n\n  handleError(msg) {\n    this.setState({\n      isError: true,\n      errMsg: msg\n    });\n  }\n\n  toggleAddRecipe() {\n    this.setState({\n      editing: !this.state.editing\n    });\n  }\n\n  handleAddIngTitle(event) {\n    this.setState({\n      newIng: _objectSpread({}, this.state.newIng, {\n        title: event.target.value\n      })\n    });\n  }\n\n  handleAddIngQty(event) {\n    this.setState({\n      newIng: _objectSpread({}, this.state.newIng, {\n        qty: event.target.value\n      })\n    });\n  }\n\n  handleAddIngUnit(event) {\n    this.setState({\n      newIng: _objectSpread({}, this.state.newIng, {\n        unit: event.target.value\n      })\n    });\n  }\n\n  handleAddRecipe(event) {\n    this.setState({\n      newRecipeName: event.target.value\n    });\n  }\n\n  addRecipe() {\n    this.addRecipeBase({\n      title: this.state.newRecipeName\n    });\n    this.toggleAddRecipe();\n  }\n\n  remRecipe(id) {\n    //post to the server and delete from the database; delete the same item locally\n    axios.delete(\"/api/\".concat(this.state.userID, \"/recipe/\").concat(id)).then(res => {\n      //console.log(res.data);\n      this.setState({\n        isError: res.data.isError,\n        errMsg: res.data.content.errors\n      });\n\n      if (res.data.isError === false) {\n        var indexToDel = -1;\n        this.state.recipes.forEach(function (recipe, index) {\n          if (recipe._id === id) {\n            indexToDel = index;\n          }\n        }); //console.log(`index to del is ${indexToDel}`);\n\n        var recipeUpdated = this.state.recipes;\n        recipeUpdated.splice(indexToDel, 1);\n        this.setState({\n          recipes: recipeUpdated\n        });\n      }\n    }).catch(err => {\n      console.error(err);\n    });\n  }\n\n  editRecipName(id, newName) {\n    axios.put(\"/api/\".concat(this.state.userID, \"/recipe/\").concat(id), {\n      'title': newName\n    }).then(res => {\n      //console.log(res.data);\n      this.setState({\n        isError: res.data.isError,\n        errMsg: res.data.content.errors\n      });\n\n      if (res.data.isError === false) {\n        var recipeUpdated = this.state.recipes.map(recipe => recipe._id !== id ? recipe : res.data.content);\n        this.setState({\n          recipes: recipeUpdated\n        });\n      }\n    }).catch(err => {\n      console.error(err);\n    });\n  }\n\n  addIngredient(id) {\n    //send new ingredient to the database, and the id of the recipe being added\n    axios.post(\"/api/\".concat(this.state.userID, \"/recipe/\").concat(id), this.state.newIng).then(res => {\n      //console.log(res.data);\n      this.setState({\n        isError: res.data.isError,\n        errMsg: res.data.content.errors\n      });\n\n      if (res.data.isError === false) {\n        //var newIng = res.data.ingredients;\n        var recipeUpdated = this.state.recipes.map(function (recipe) {\n          if (recipe._id === id) {\n            //var addedIng=recipe.ingredients.concat(newIng);\n            var newIng = res.data.content.ingredients;\n            return _objectSpread({}, recipe, {\n              ingredients: newIng\n            });\n          } else {\n            return recipe;\n          }\n        });\n        this.setState({\n          recipes: recipeUpdated,\n          newIng: {\n            title: '',\n            qty: 0,\n            unit: ''\n          }\n        });\n      }\n    }).catch(err => {\n      console.error(err);\n    });\n  }\n\n  delIngredient(id, ingId) {\n    axios.delete(\"/api/\".concat(this.state.userID, \"/recipe/\").concat(id, \"/\").concat(ingId)).then(res => {\n      //console.log(res.data);\n      this.setState({\n        isError: res.data.isError,\n        errMsg: res.data.content.errors\n      });\n\n      if (res.data.isError === false) {\n        var recipeUpdated = this.state.recipes.map(function (recipe) {\n          if (recipe._id === id) {\n            //var addedIng=recipe.ingredients.concat(newIng);\n            var newIng = res.data.content.ingredients;\n            return _objectSpread({}, recipe, {\n              ingredients: newIng\n            });\n          } else {\n            return recipe;\n          }\n        });\n        this.setState({\n          recipes: recipeUpdated\n        });\n      }\n    }).catch(err => {\n      console.error(err);\n    });\n  }\n\n  editIngredient(id, ingId, editedIng) {\n    axios.put(\"/api/\".concat(this.state.userID, \"/recipe/\").concat(id, \"/\").concat(ingId), editedIng).then(res => {\n      //console.log(res.data);\n      this.setState({\n        isError: res.data.isError,\n        errMsg: res.data.content.errors\n      });\n\n      if (res.data.isError === false) {\n        var recIndexToEdit = -1;\n        var ingIndexToEdit = -1;\n        this.state.recipes.forEach(function (recipe, index) {\n          if (recipe._id === id) {\n            recIndexToEdit = index;\n            recipe.ingredients.forEach(function (ing, ingIndex) {\n              if (ing._id === ingId) {\n                ingIndexToEdit = ingIndex;\n              }\n            });\n          }\n        });\n        var recipeUpdated = this.state.recipes;\n        recipeUpdated[recIndexToEdit].ingredients[ingIndexToEdit] = res.data.content; //console.log(recipeUpdated);\t\n\n        this.setState({\n          recipes: recipeUpdated\n        });\n      }\n    }).catch(err => {\n      console.error(err);\n    });\n  }\n\n  removeAll() {\n    axios.delete(\"/api/\".concat(this.state.userID, \"/recipeDelAll\")).then(res => {\n      //console.log (res.data);\n      this.setState({\n        isError: res.data.isError,\n        errMsg: res.data.content.errors\n      });\n\n      if (res.data.isError === false) {\n        this.setState({\n          recipes: []\n        });\n      }\n    }).catch(err => {\n      console.error(err);\n    });\n  }\n\n  delAllIngredient(id) {\n    axios.delete(\"/api/\".concat(this.state.userID, \"/recipeDelAllIng/\").concat(id)).then(res => {\n      //console.log(res.data);\n      this.setState({\n        isError: res.data.isError,\n        errMsg: res.data.content.errors\n      });\n\n      if (res.data.isError === false) {\n        var recipeUpdated = this.state.recipes.map(function (recipe) {\n          if (recipe._id === id) {\n            //var addedIng=recipe.ingredients.concat(newIng);\n            var newIng = res.data.content.ingredients;\n            return _objectSpread({}, recipe, {\n              ingredients: newIng\n            });\n          } else {\n            return recipe;\n          }\n        });\n        this.setState({\n          recipes: recipeUpdated\n        });\n      }\n    }).catch(err => {\n      console.error(err);\n    });\n  }\n\n  eachRecipe(recipe) {\n    return React.createElement(RecipeCard, {\n      key: recipe._id,\n      id: recipe._id,\n      title: recipe.title,\n      ingredients: recipe.ingredients,\n      addIng: this.addIngredient,\n      remRecipe: this.remRecipe,\n      delAllIng: this.delAllIngredient,\n      delIng: this.delIngredient,\n      editIngredient: this.editIngredient,\n      handleIngTitle: this.handleAddIngTitle,\n      handleIngQty: this.handleAddIngQty,\n      handleIngUnit: this.handleAddIngUnit,\n      saveEdit: this.editRecipName,\n      pageCtrl: this.state.pageCtrl,\n      copyRecipe: this.copyRecipe //curRecipe = {recipe}\n      ,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 393\n      },\n      __self: this\n    });\n  }\n\n  render() {\n    var app_url = '';\n\n    if (!this.state.isProduction) {\n      app_url = 'https://fccwebapps-mtanzim.c9users.io';\n    }\n\n    return React.createElement(\"div\", {\n      className: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 423\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      className: \"mt-4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 424\n      },\n      __self: this\n    }, \"Recipe List\"), this.state.isError && React.createElement(ErrorMessage, {\n      isEdititing: this.state.isEdititing,\n      errMsg: this.state.errMsg,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 425\n      },\n      __self: this\n    }), this.state.isLoggedIn ? React.createElement(UserInfo, {\n      app_url: app_url,\n      userObj: this.state.user,\n      loginIcon: this.state.loginIcon,\n      isLoggedIn: this.state.isLoggedIn,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 428\n      },\n      __self: this\n    }) : React.createElement(UserLogin, {\n      handleError: this.handleError,\n      app_url: app_url,\n      isLoggedIn: this.state.isLoggedIn,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 433\n      },\n      __self: this\n    }), this.state.isLoggedIn && React.createElement(UserMenu, {\n      toggleMyRecipe: this.toggleMyRecipe,\n      toggleMyProfile: this.toggleMyProfile,\n      curUser: this.state.userID,\n      getFriendRecipe: this.getFriendRecipe,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 439\n      },\n      __self: this\n    }), this.state.isLoggedIn && this.state.pageCtrl === 0 && React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 446\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      type: \"button\",\n      className: \"mt-2 btn btn-default\",\n      onClick: this.toggleAddRecipe,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 447\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"fa fa-plus\",\n      \"aria-hidden\": \"true\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 447\n      },\n      __self: this\n    })), React.createElement(\"button\", {\n      className: \"mt-2 ml-2 btn btn-danger\",\n      onClick: this.removeAll,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 448\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"fa fa-trash-o\",\n      \"aria-hidden\": \"true\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 448\n      },\n      __self: this\n    }))), this.state.editing && React.createElement(\"div\", {\n      className: \"mt-4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 452\n      },\n      __self: this\n    }, React.createElement(AddRecipeForm, {\n      onChange: this.handleAddRecipe,\n      onSaveButton: this.addRecipe,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 453\n      },\n      __self: this\n    })), this.state.pageCtrl === 0 && React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 456\n      },\n      __self: this\n    }, this.state.recipes.map(this.eachRecipe)), this.state.pageCtrl === 1 && React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 461\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      className: \"mt-2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 462\n      },\n      __self: this\n    }, this.state.friendUser.displayName.name, \"'s Recipes\"), React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 463\n      },\n      __self: this\n    }, this.state.friendUser.recipes.map(this.eachRecipe))), this.state.pageCtrl === 2 && React.createElement(UserProfile, {\n      handleError: this.handleError,\n      userInfo: this.state.user,\n      loginType: this.state.loginMethod,\n      userIcon: this.state.loginIcon,\n      userID: this.state.userID,\n      numRecipes: this.state.recipes.length,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 468\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default RecipeApp;","map":{"version":3,"sources":["/Users/macbookair/Desktop/my-app/client/src/RecipeApp.js"],"names":["React","require","Component","axios","loadProgressBar","RecipeApp","constructor","props","getFriendRecipe","id","get","then","res","setState","friendUser","data","content","pageCtrl","catch","err","console","error","toggleMyRecipe","toggleMyProfile","copyRecipe","recipe","addRecipeBase","isError","errMsg","newRecipe","post","state","userID","errors","updatedRecipe","recipes","newRecipeName","isLoggedIn","isProduction","loginMethod","loginIcon","user","recipeToCopy","newIng","title","qty","unit","editing","eachRecipe","bind","addIngredient","delAllIngredient","delIngredient","addRecipe","remRecipe","removeAll","handleAddRecipe","handleAddIngTitle","handleAddIngQty","handleAddIngUnit","editRecipName","toggleAddRecipe","editIngredient","handleError","componentDidMount","_id","undefined","displayName","name","type","msg","event","target","value","delete","indexToDel","forEach","index","recipeUpdated","splice","newName","put","map","ingredients","ingId","editedIng","recIndexToEdit","ingIndexToEdit","ing","ingIndex","render","app_url","isEdititing","length"],"mappings":"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","sourcesContent":["/*Tanzim Mokammel\nmtanzim@gmail.com\nNov 2017\n*/\n\nconst React=require('react').React\nconst Component=require('react').Component\n//import scrollToComponent from 'react-scroll-to-component';\nrequire('./style.css');\nconst axios=require('axios');\n\n\n\n\nconst loadProgressBar=require('axios-progress-bar').loadProgressBar\nrequire('axios-progress-bar/dist/nprogress.css');\n\n//loadProgressBar();\n\nclass RecipeApp extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoggedIn: true,\n      isProduction: true, //use this variable to control url type\n      //app_url: 'https://fccwebapps-mtanzim.c9users.io',\n      loginMethod: \"\",\n      loginIcon: \"fa fa-user\",\n      isError: true,\n      errMsg: \"Facebook log in is currently unavailable. I've requested assistance from Facebook, and awaiting feedback.\",\n      user: '',\n      userID: '',\n      friendUser: {},\n      recipes: [],\n      //friendRecipes: [],\n      recipeToCopy: {},\n      newRecipeName: '',\n      newIng: { title: '', qty: '', unit: '' },\n      editing: false,\n      pageCtrl: 0 //allows users to toggle between pages\n      //addRecipeStyleState: {display:'none'}\n    };\n\n    this.eachRecipe = this.eachRecipe.bind(this);\n    this.addIngredient = this.addIngredient.bind(this);\n    this.delAllIngredient = this.delAllIngredient.bind(this);\n    this.delIngredient = this.delIngredient.bind(this);\n    this.addRecipe = this.addRecipe.bind(this);\n    this.remRecipe = this.remRecipe.bind(this);\n    this.removeAll = this.removeAll.bind(this);\n    this.handleAddRecipe = this.handleAddRecipe.bind(this);\n    this.handleAddIngTitle = this.handleAddIngTitle.bind(this);\n    this.handleAddIngQty = this.handleAddIngQty.bind(this);\n    this.handleAddIngUnit = this.handleAddIngUnit.bind(this);\n    this.editRecipName = this.editRecipName.bind(this);\n    this.toggleAddRecipe = this.toggleAddRecipe.bind(this);\n    this.editIngredient = this.editIngredient.bind(this);\n    //this.setLoginMethod = this.setLoginMethod.bind(this);\n    this.handleError = this.handleError.bind(this);\n    //this.renderAddRecipeForm = this.renderAddRecipeForm.bind(this);\n\n  }\n\n  componentDidMount() {\n    loadProgressBar();\n    axios.get('/getCurUser')\n      //axios.get(`/api/${this.state.userID}`)\n      .then(res => {\n        ////console.log(res.data);\n        ////console.log((typeof(res.data)==='object') && res.data.user.id!==undefined);\n        if ((typeof (res.data) === 'object') && res.data._id !== undefined) {\n\n          //console.log('User found');\n          //console.log(res.data);\n          //this.setState({userID:res.data._id});\n          this.setState({\n            isLoggedIn: true,\n            isError: false,\n            recipes: res.data.recipes,\n            userID: res.data._id,\n            user: res.data.displayName.name,\n            loginMethod: res.data.displayName.type\n          });\n\n          if (this.state.loginMethod === 'git') {\n            this.setState({\n              loginIcon: \"fa fa-github\"\n            })\n          }\n          else if (this.state.loginMethod === 'fb') {\n            this.setState({\n              loginIcon: \"fa fa-facebook\"\n            })\n          }\n\n        }\n      }).catch(err => {\n        console.error(err);\n      });\n  }\n\n  getFriendRecipe = (id) => {\n    //console.log (id);\n    axios.get(`/api/${id}`)\n      .then(res => {\n        this.setState({\n          friendUser: res.data.content,\n          pageCtrl: 1\n        });\n      }).catch(err => {\n        console.error(err);\n      });\n  }\n\n  toggleMyRecipe = () => {\n    this.setState({\n      pageCtrl: 0\n    });\n  }\n\n  toggleMyProfile = () => {\n    this.setState({\n      pageCtrl: 2\n    });\n  }\n  handleError(msg) {\n    this.setState({\n      isError: true,\n      errMsg: msg\n    })\n  }\n\n  toggleAddRecipe() {\n    this.setState({\n      editing: !this.state.editing\n    });\n  }\n\n  handleAddIngTitle(event) {\n    this.setState({\n      newIng: { ...this.state.newIng, title: event.target.value }\n    });\n  }\n  handleAddIngQty(event) {\n    this.setState({\n      newIng: { ...this.state.newIng, qty: event.target.value }\n    });\n  }\n  handleAddIngUnit(event) {\n    this.setState({\n      newIng: { ...this.state.newIng, unit: event.target.value }\n    });\n  }\n\n  handleAddRecipe(event) {\n    this.setState({\n      newRecipeName: event.target.value\n    });\n  }\n  copyRecipe = (recipe) => {\n    this.addRecipeBase(recipe);\n    this.setState({\n      isError: true,\n      errMsg: \"Recipe copied!\"\n\n    })\n  }\n  addRecipe() {\n    this.addRecipeBase({ title: this.state.newRecipeName });\n    this.toggleAddRecipe();\n  }\n\n  addRecipeBase = (newRecipe) => {\n    //var newRecipe={title:this.state.newRecipeName, ingredients:[{}]};\n    //var newRecipe={title:this.state.newRecipeName};\n    axios.post(`/api/${this.state.userID}/recipe`, newRecipe)\n      .then(res => {\n        //console.log(res.data);\n        this.setState({\n          isError: res.data.isError,\n          errMsg: res.data.content.errors\n        });\n        if (res.data.isError === false) {\n          var updatedRecipe = res.data.content;\n          this.setState({\n            recipes: updatedRecipe,\n            newRecipeName: '',\n            isError: false\n          });\n          //console.log(this.state.recipes);\n\n        }\n      })\n      .catch(err => {\n        console.error(err);\n      });\n  }\n  remRecipe(id) {\n    //post to the server and delete from the database; delete the same item locally\n    axios.delete(`/api/${this.state.userID}/recipe/${id}`)\n      .then(res => {\n        //console.log(res.data);\n        this.setState({\n          isError: res.data.isError,\n          errMsg: res.data.content.errors\n        });\n        if (res.data.isError === false) {\n          var indexToDel = -1;\n          this.state.recipes.forEach(function (recipe, index) {\n            if (recipe._id === id) {\n              indexToDel = index;\n            }\n          });\n          //console.log(`index to del is ${indexToDel}`);\n          var recipeUpdated = this.state.recipes;\n          recipeUpdated.splice(indexToDel, 1);\n          this.setState({\n            recipes: recipeUpdated\n          });\n        }\n      })\n      .catch(err => {\n        console.error(err);\n      });\n  }\n  editRecipName(id, newName) {\n    axios.put(`/api/${this.state.userID}/recipe/${id}`, { 'title': newName })\n      .then(res => {\n        //console.log(res.data);\n        this.setState({\n          isError: res.data.isError,\n          errMsg: res.data.content.errors\n        });\n        if (res.data.isError === false) {\n          var recipeUpdated = this.state.recipes.map(\n            recipe => (recipe._id !== id) ?\n              recipe : res.data.content\n          );\n          this.setState({\n            recipes: recipeUpdated\n          });\n        }\n      })\n      .catch(err => {\n        console.error(err);\n      });\n  }\n  addIngredient(id) {\n\n    //send new ingredient to the database, and the id of the recipe being added\n    axios.post(`/api/${this.state.userID}/recipe/${id}`, this.state.newIng)\n      .then(res => {\n\n        //console.log(res.data);\n        this.setState({\n          isError: res.data.isError,\n          errMsg: res.data.content.errors\n        });\n        if (res.data.isError === false) {\n          //var newIng = res.data.ingredients;\n          var recipeUpdated = this.state.recipes.map(function (recipe) {\n            if (recipe._id === id) {\n              //var addedIng=recipe.ingredients.concat(newIng);\n              var newIng = res.data.content.ingredients;\n              return { ...recipe, ingredients: newIng };\n            } else {\n              return recipe;\n            }\n          });\n          this.setState({\n            recipes: recipeUpdated,\n            newIng: { title: '', qty: 0, unit: '' }\n          });\n        }\n      })\n      .catch(err => {\n        console.error(err);\n      });\n  }\n\n  delIngredient(id, ingId) {\n    axios.delete(`/api/${this.state.userID}/recipe/${id}/${ingId}`)\n      .then(res => {\n        //console.log(res.data);\n        this.setState({\n          isError: res.data.isError,\n          errMsg: res.data.content.errors\n        });\n        if (res.data.isError === false) {\n          var recipeUpdated = this.state.recipes.map(function (recipe) {\n            if (recipe._id === id) {\n              //var addedIng=recipe.ingredients.concat(newIng);\n              var newIng = res.data.content.ingredients;\n              return { ...recipe, ingredients: newIng };\n            } else {\n              return recipe;\n            }\n          });\n          this.setState({\n            recipes: recipeUpdated\n          });\n        }\n      })\n      .catch(err => {\n        console.error(err);\n      });\n  }\n\n  editIngredient(id, ingId, editedIng) {\n    axios.put(`/api/${this.state.userID}/recipe/${id}/${ingId}`, editedIng)\n      .then(res => {\n        //console.log(res.data);\n        this.setState({\n          isError: res.data.isError,\n          errMsg: res.data.content.errors\n        });\n        if (res.data.isError === false) {\n          var recIndexToEdit = -1;\n          var ingIndexToEdit = -1;\n          this.state.recipes.forEach(function (recipe, index) {\n            if (recipe._id === id) {\n              recIndexToEdit = index;\n              recipe.ingredients.forEach(function (ing, ingIndex) {\n                if (ing._id === ingId) {\n                  ingIndexToEdit = ingIndex;\n                }\n              });\n            }\n          });\n\n          var recipeUpdated = this.state.recipes;\n          recipeUpdated[recIndexToEdit].ingredients[ingIndexToEdit] = res.data.content;\n          //console.log(recipeUpdated);\t\n          this.setState({\n            recipes: recipeUpdated\n          });\n\n        }\n\n      })\n      .catch(err => {\n        console.error(err);\n      });\n  }\n  removeAll() {\n    axios.delete(`/api/${this.state.userID}/recipeDelAll`)\n      .then(res => {\n        //console.log (res.data);\n        this.setState({\n          isError: res.data.isError,\n          errMsg: res.data.content.errors\n        });\n        if (res.data.isError === false) {\n          this.setState({\n            recipes: [],\n          });\n        }\n      })\n      .catch(err => {\n        console.error(err);\n      });\n  }\n  delAllIngredient(id) {\n    axios.delete(`/api/${this.state.userID}/recipeDelAllIng/${id}`)\n      .then(res => {\n        //console.log(res.data);\n        this.setState({\n          isError: res.data.isError,\n          errMsg: res.data.content.errors\n        });\n        if (res.data.isError === false) {\n          var recipeUpdated = this.state.recipes.map(function (recipe) {\n            if (recipe._id === id) {\n              //var addedIng=recipe.ingredients.concat(newIng);\n              var newIng = res.data.content.ingredients;\n              return { ...recipe, ingredients: newIng };\n            } else {\n              return recipe;\n            }\n          });\n          this.setState({\n            recipes: recipeUpdated\n          });\n        }\n      })\n      .catch(err => {\n        console.error(err);\n      });\n  }\n\n  eachRecipe(recipe) {\n    return (\n      <RecipeCard\n        key={recipe._id}\n        id={recipe._id}\n        title={recipe.title}\n        ingredients={recipe.ingredients}\n        addIng={this.addIngredient}\n        remRecipe={this.remRecipe}\n        delAllIng={this.delAllIngredient}\n        delIng={this.delIngredient}\n        editIngredient={this.editIngredient}\n        handleIngTitle={this.handleAddIngTitle}\n        handleIngQty={this.handleAddIngQty}\n        handleIngUnit={this.handleAddIngUnit}\n        saveEdit={this.editRecipName}\n        pageCtrl={this.state.pageCtrl}\n        copyRecipe={this.copyRecipe}\n      //curRecipe = {recipe}\n      ></RecipeCard>\n    );\n  }\n\n  render() {\n\n    var app_url = '';\n\n    if (!this.state.isProduction) {\n      app_url = 'https://fccwebapps-mtanzim.c9users.io';\n    }\n\n    return (\n      <div className=\"container\">\n        <h1 className=\"mt-4\">Recipe List</h1>\n        {this.state.isError && (<ErrorMessage\n          isEdititing={this.state.isEdititing} errMsg={this.state.errMsg} />)}\n        {this.state.isLoggedIn ?\n          (<UserInfo app_url={app_url}\n            userObj={this.state.user}\n            loginIcon={this.state.loginIcon}\n            isLoggedIn={this.state.isLoggedIn} />\n          ) : (\n            <UserLogin\n              handleError={this.handleError}\n              app_url={app_url}\n              isLoggedIn={this.state.isLoggedIn} />\n          )}\n\n        {this.state.isLoggedIn && <UserMenu toggleMyRecipe={this.toggleMyRecipe}\n          toggleMyProfile={this.toggleMyProfile}\n          curUser={this.state.userID}\n          getFriendRecipe={this.getFriendRecipe}\n        />}\n        {this.state.isLoggedIn && this.state.pageCtrl === 0 &&\n          (\n            <div>\n              <button type=\"button\" className=\"mt-2 btn btn-default\" onClick={this.toggleAddRecipe}><i className=\"fa fa-plus\" aria-hidden=\"true\"></i></button>\n              <button className=\"mt-2 ml-2 btn btn-danger\" onClick={this.removeAll}><i className=\"fa fa-trash-o\" aria-hidden=\"true\"></i></button>\n            </div>\n          )}\n\n        {this.state.editing && (<div className=\"mt-4\">\n          <AddRecipeForm onChange={this.handleAddRecipe} onSaveButton={this.addRecipe} />\n        </div>)}\n        {this.state.pageCtrl === 0 &&\n          (<div className=\"row\">\n            {this.state.recipes.map(this.eachRecipe)}\n          </div>)}\n        {this.state.pageCtrl === 1 &&\n          (\n            <div>\n              <h3 className=\"mt-2\">{this.state.friendUser.displayName.name}'s Recipes</h3>\n              <div className=\"row\">\n                {this.state.friendUser.recipes.map(this.eachRecipe)}\n              </div>\n            </div>)}\n        {this.state.pageCtrl === 2 &&\n          (<UserProfile\n            handleError={this.handleError}\n            userInfo={this.state.user}\n            loginType={this.state.loginMethod}\n            userIcon={this.state.loginIcon}\n            userID={this.state.userID}\n            numRecipes={this.state.recipes.length} />)}\n      </div>\n    )\n  }\n}\n\n\n\n\nexport default RecipeApp;"]},"metadata":{},"sourceType":"module"}