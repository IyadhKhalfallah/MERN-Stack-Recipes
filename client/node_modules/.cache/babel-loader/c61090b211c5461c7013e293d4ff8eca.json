{"ast":null,"code":"import _defineProperty from \"/Users/macbookair/Desktop/my-app/client/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/macbookair/Desktop/my-app/client/src/components/dashboard/Dashboard.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\nimport { logoutUser } from \"../../actions/authActions\";\nimport axios from \"axios\";\nimport UserProfile from '../../UserProfile';\nimport RecipeCard from '../../RecipeCard';\nimport UserMenu from '../../UserMenu';\nimport { loadProgressBar } from 'axios-progress-bar';\nimport '../../style.module.css';\nimport jwt_decode from \"jwt-decode\";\nimport AddRecipeForm from '../../AddRecipeForm';\n\nclass Dashboard extends Component {\n  constructor(props) {\n    super(props);\n\n    this.onLogoutClick = e => {\n      e.preventDefault();\n      this.props.logoutUser();\n    };\n\n    this.getUserByID = id => {\n      axios.get(\"http://localhost:8080/api/users/\".concat(id)).then(res => {\n        this.setState({\n          friend: res.data\n        });\n      });\n    };\n\n    this.getFriendRecipe = id => {\n      //console.log (id);\n      axios.get(\"http://localhost:8080/api/recipes/\".concat(id)).then(res => {\n        this.setState({\n          friendUser: res.data,\n          pageCtrl: 1\n        });\n        console.log(\"FriendUser Here\");\n        console.log(this.state.friendUser);\n      }).catch(err => {\n        console.error(err);\n      });\n    };\n\n    this.toggleMyRecipe = () => {\n      this.setState({\n        pageCtrl: 0\n      });\n    };\n\n    this.toggleMyProfile = () => {\n      this.setState({\n        pageCtrl: 2\n      });\n    };\n\n    this.copyRecipe = recipe => {\n      this.addRecipeBase(recipe);\n      this.setState({\n        isError: true,\n        errMsg: \"Recipe copied!\"\n      });\n    };\n\n    this.addRecipeBase = newRecipe => {\n      //var newRecipe={title:this.state.newRecipeName, ingredients:[{}]};\n      //var newRecipe={title:this.state.newRecipeName};\n      let userID = jwt_decode(localStorage.jwtToken.replace(\"Bearer \", \"\"))['id'];\n      axios.post(\"http://localhost:8080/api/recipes/\".concat(userID), newRecipe).then(res => {\n        //console.log(res.data);\n        this.setState({});\n\n        if (res.data.isError === false) {\n          var updatedRecipe = res.data.content;\n          this.setState({\n            recipes: updatedRecipe,\n            newRecipeName: '',\n            isError: false\n          }); //console.log(this.state.recipes);\n        }\n      }).catch(err => {\n        console.error(err);\n      });\n    };\n\n    this.state = {\n      user: '',\n      userID: '',\n      friend: '',\n      friendUser: {},\n      recipes: [],\n      //friendRecipes: [],\n      recipeToCopy: {},\n      newRecipeName: '',\n      newIng: {\n        title: '',\n        qty: '',\n        unit: ''\n      },\n      editing: false,\n      pageCtrl: 0 //allows users to toggle between pages\n      //addRecipeStyleState: {display:'none'}\n\n    };\n    this.eachRecipe = this.eachRecipe.bind(this);\n    this.addIngredient = this.addIngredient.bind(this);\n    this.delAllIngredient = this.delAllIngredient.bind(this);\n    this.delIngredient = this.delIngredient.bind(this);\n    this.addRecipe = this.addRecipe.bind(this);\n    this.remRecipe = this.remRecipe.bind(this);\n    this.removeAll = this.removeAll.bind(this);\n    this.handleAddRecipe = this.handleAddRecipe.bind(this);\n    this.handleAddIngTitle = this.handleAddIngTitle.bind(this);\n    this.handleAddIngQty = this.handleAddIngQty.bind(this);\n    this.handleAddIngUnit = this.handleAddIngUnit.bind(this);\n    this.editRecipName = this.editRecipName.bind(this);\n    this.toggleAddRecipe = this.toggleAddRecipe.bind(this);\n    this.editIngredient = this.editIngredient.bind(this); //this.setLoginMethod = this.setLoginMethod.bind(this);\n\n    this.handleError = this.handleError.bind(this); //this.renderAddRecipeForm = this.renderAddRecipeForm.bind(this);\n  }\n\n  componentDidMount() {\n    loadProgressBar();\n    let user = jwt_decode(localStorage.jwtToken.replace(\"Bearer \", \"\"))['id'];\n    axios.get(\"http://localhost:8080/api/recipes/\".concat(user)) //axios.get(`/api/${this.state.userID}`)\n    .then(res => {\n      ////console.log(res.data);\n      ////console.log((typeof(res.data)==='object') && res.data.user.id!==undefined);\n      //console.log('User found');\n      //console.log(res.data);\n      //this.setState({userID:res.data._id});\n      console.log(res.data);\n      this.setState({\n        recipes: res.data,\n        userID: user\n      });\n    }).catch(err => {\n      console.error(err);\n    });\n  }\n\n  handleError(msg) {\n    this.setState({\n      isError: true,\n      errMsg: msg\n    });\n  }\n\n  toggleAddRecipe() {\n    this.setState({\n      editing: !this.state.editing\n    });\n  }\n\n  handleAddIngTitle(event) {\n    this.setState({\n      newIng: _objectSpread({}, this.state.newIng, {\n        title: event.target.value\n      })\n    });\n  }\n\n  handleAddIngQty(event) {\n    this.setState({\n      newIng: _objectSpread({}, this.state.newIng, {\n        qty: event.target.value\n      })\n    });\n  }\n\n  handleAddIngUnit(event) {\n    this.setState({\n      newIng: _objectSpread({}, this.state.newIng, {\n        unit: event.target.value\n      })\n    });\n  }\n\n  handleAddRecipe(event) {\n    this.setState({\n      newRecipeName: event.target.value\n    });\n  }\n\n  parseJwt(token) {\n    if (!token) {\n      return;\n    }\n\n    const base64Url = token.split('.')[1];\n    const base64 = base64Url.replace('-', '+').replace('_', '/');\n    return JSON.parse(window.atob(base64));\n  }\n\n  addRecipe() {\n    this.addRecipeBase({\n      title: this.state.newRecipeName\n    });\n    this.toggleAddRecipe();\n  }\n\n  remRecipe(id) {\n    //post to the server and delete from the database; delete the same item locally\n    axios.delete(\"/api/\".concat(this.state.userID, \"/recipe/\").concat(id)).then(res => {\n      //console.log(res.data);\n      this.setState({\n        isError: res.data.isError,\n        errMsg: res.data.content.errors\n      });\n\n      if (res.data.isError === false) {\n        var indexToDel = -1;\n        this.state.recipes.forEach(function (recipe, index) {\n          if (recipe._id === id) {\n            indexToDel = index;\n          }\n        }); //console.log(`index to del is ${indexToDel}`);\n\n        var recipeUpdated = this.state.recipes;\n        recipeUpdated.splice(indexToDel, 1);\n        this.setState({\n          recipes: recipeUpdated\n        });\n      }\n    }).catch(err => {\n      console.error(err);\n    });\n  }\n\n  editRecipName(id, newName) {\n    axios.put(\"/api/\".concat(this.state.userID, \"/recipe/\").concat(id), {\n      'title': newName\n    }).then(res => {\n      //console.log(res.data);\n      this.setState({\n        isError: res.data.isError,\n        errMsg: res.data.content.errors\n      });\n\n      if (res.data.isError === false) {\n        var recipeUpdated = this.state.recipes.map(recipe => recipe._id !== id ? recipe : res.data.content);\n        this.setState({\n          recipes: recipeUpdated\n        });\n      }\n    }).catch(err => {\n      console.error(err);\n    });\n  }\n\n  addIngredient(id) {\n    //send new ingredient to the database, and the id of the recipe being added\n    axios.post(\"/api/\".concat(this.state.userID, \"/recipe/\").concat(id), this.state.newIng).then(res => {\n      //console.log(res.data);\n      this.setState({\n        isError: res.data.isError,\n        errMsg: res.data.content.errors\n      });\n\n      if (res.data.isError === false) {\n        //var newIng = res.data.ingredients;\n        var recipeUpdated = this.state.recipes.map(function (recipe) {\n          if (recipe._id === id) {\n            //var addedIng=recipe.ingredients.concat(newIng);\n            var newIng = res.data.content.ingredients;\n            return _objectSpread({}, recipe, {\n              ingredients: newIng\n            });\n          } else {\n            return recipe;\n          }\n        });\n        this.setState({\n          recipes: recipeUpdated,\n          newIng: {\n            title: '',\n            qty: 0,\n            unit: ''\n          }\n        });\n      }\n    }).catch(err => {\n      console.error(err);\n    });\n  }\n\n  delIngredient(id, ingId) {\n    axios.delete(\"/api/\".concat(this.state.userID, \"/recipe/\").concat(id, \"/\").concat(ingId)).then(res => {\n      //console.log(res.data);\n      this.setState({\n        isError: res.data.isError,\n        errMsg: res.data.content.errors\n      });\n\n      if (res.data.isError === false) {\n        var recipeUpdated = this.state.recipes.map(function (recipe) {\n          if (recipe._id === id) {\n            //var addedIng=recipe.ingredients.concat(newIng);\n            var newIng = res.data.content.ingredients;\n            return _objectSpread({}, recipe, {\n              ingredients: newIng\n            });\n          } else {\n            return recipe;\n          }\n        });\n        this.setState({\n          recipes: recipeUpdated\n        });\n      }\n    }).catch(err => {\n      console.error(err);\n    });\n  }\n\n  editIngredient(id, ingId, editedIng) {\n    axios.put(\"/api/\".concat(this.state.userID, \"/recipe/\").concat(id, \"/\").concat(ingId), editedIng).then(res => {\n      //console.log(res.data);\n      this.setState({\n        isError: res.data.isError,\n        errMsg: res.data.content.errors\n      });\n\n      if (res.data.isError === false) {\n        var recIndexToEdit = -1;\n        var ingIndexToEdit = -1;\n        this.state.recipes.forEach(function (recipe, index) {\n          if (recipe._id === id) {\n            recIndexToEdit = index;\n            recipe.ingredients.forEach(function (ing, ingIndex) {\n              if (ing._id === ingId) {\n                ingIndexToEdit = ingIndex;\n              }\n            });\n          }\n        });\n        var recipeUpdated = this.state.recipes;\n        recipeUpdated[recIndexToEdit].ingredients[ingIndexToEdit] = res.data.content; //console.log(recipeUpdated);\t\n\n        this.setState({\n          recipes: recipeUpdated\n        });\n      }\n    }).catch(err => {\n      console.error(err);\n    });\n  }\n\n  removeAll() {\n    axios.delete(\"/api/\".concat(this.state.userID, \"/recipeDelAll\")).then(res => {\n      //console.log (res.data);\n      this.setState({\n        isError: res.data.isError,\n        errMsg: res.data.content.errors\n      });\n\n      if (res.data.isError === false) {\n        this.setState({\n          recipes: []\n        });\n      }\n    }).catch(err => {\n      console.error(err);\n    });\n  }\n\n  delAllIngredient(id) {\n    axios.delete(\"/api/\".concat(this.state.userID, \"/recipeDelAllIng/\").concat(id)).then(res => {\n      //console.log(res.data);\n      this.setState({\n        isError: res.data.isError,\n        errMsg: res.data.content.errors\n      });\n\n      if (res.data.isError === false) {\n        var recipeUpdated = this.state.recipes.map(function (recipe) {\n          if (recipe._id === id) {\n            //var addedIng=recipe.ingredients.concat(newIng);\n            var newIng = res.data.content.ingredients;\n            return _objectSpread({}, recipe, {\n              ingredients: newIng\n            });\n          } else {\n            return recipe;\n          }\n        });\n        this.setState({\n          recipes: recipeUpdated\n        });\n      }\n    }).catch(err => {\n      console.error(err);\n    });\n  }\n\n  eachRecipe(recipe) {\n    return React.createElement(RecipeCard, {\n      key: recipe._id,\n      id: recipe._id,\n      title: recipe.title,\n      ingredients: recipe.ingredients,\n      addIng: this.addIngredient,\n      remRecipe: this.remRecipe,\n      delAllIng: this.delAllIngredient,\n      delIng: this.delIngredient,\n      editIngredient: this.editIngredient,\n      handleIngTitle: this.handleAddIngTitle,\n      handleIngQty: this.handleAddIngQty,\n      handleIngUnit: this.handleAddIngUnit,\n      saveEdit: this.editRecipName,\n      pageCtrl: this.state.pageCtrl,\n      copyRecipe: this.copyRecipe //curRecipe = {recipe}\n      ,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 387\n      },\n      __self: this\n    });\n  }\n\n  render() {\n    const user = this.props.auth.user;\n    return React.createElement(\"div\", {\n      style: {\n        height: \"75vh\"\n      },\n      className: \"container valign-wrapper\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 412\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 413\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"landing-copy col s12 center-align\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 414\n      },\n      __self: this\n    }, React.createElement(\"h4\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 415\n      },\n      __self: this\n    }, React.createElement(UserMenu, {\n      toggleMyRecipe: this.toggleMyRecipe,\n      toggleMyProfile: this.toggleMyProfile,\n      curUser: this.state.userID,\n      getFriendRecipe: this.getFriendRecipe,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 416\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"mt-4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 422\n      },\n      __self: this\n    }, React.createElement(AddRecipeForm, {\n      onChange: this.handleAddRecipe,\n      onSaveButton: this.addRecipe,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 423\n      },\n      __self: this\n    })), this.state.pageCtrl === 1 && React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 428\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      className: \"mt-2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 430\n      },\n      __self: this\n    }, this.getUserByID(this.state.friendUser[0]._user['_id']), \"'s Recipes\"), React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 431\n      },\n      __self: this\n    })), this.state.pageCtrl === 2 && React.createElement(UserProfile, {\n      handleError: this.handleError,\n      userInfo: this.state.user,\n      loginType: this.state.loginMethod,\n      userIcon: this.state.loginIcon,\n      userID: this.state.userID,\n      numRecipes: this.state.recipes.length,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 436\n      },\n      __self: this\n    }), React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 444\n      },\n      __self: this\n    }, \"Hey there,\"), \" \", user.name.split(\" \")[0], React.createElement(\"p\", {\n      className: \"flow-text grey-text text-darken-1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 445\n      },\n      __self: this\n    }, \"You are logged into a full-stack\", \" \", React.createElement(\"span\", {\n      style: {\n        fontFamily: \"monospace\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 447\n      },\n      __self: this\n    }, \"MERN\"), \" app \\uD83D\\uDC4F\")), React.createElement(\"button\", {\n      style: {\n        width: \"150px\",\n        borderRadius: \"3px\",\n        letterSpacing: \"1.5px\",\n        marginTop: \"1rem\"\n      },\n      onClick: this.onLogoutClick,\n      className: \"btn btn-large waves-effect waves-light hoverable blue accent-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 450\n      },\n      __self: this\n    }, \"Logout\"))));\n  }\n\n}\n\nDashboard.propTypes = {\n  logoutUser: PropTypes.func.isRequired,\n  auth: PropTypes.object.isRequired\n};\n\nconst mapStateToProps = state => ({\n  auth: state.auth\n});\n\nexport default connect(mapStateToProps, {\n  logoutUser\n})(Dashboard);","map":{"version":3,"sources":["/Users/macbookair/Desktop/my-app/client/src/components/dashboard/Dashboard.js"],"names":["React","Component","PropTypes","connect","logoutUser","axios","UserProfile","RecipeCard","UserMenu","loadProgressBar","jwt_decode","AddRecipeForm","Dashboard","constructor","props","onLogoutClick","e","preventDefault","getUserByID","id","get","then","res","setState","friend","data","getFriendRecipe","friendUser","pageCtrl","console","log","state","catch","err","error","toggleMyRecipe","toggleMyProfile","copyRecipe","recipe","addRecipeBase","isError","errMsg","newRecipe","userID","localStorage","jwtToken","replace","post","updatedRecipe","content","recipes","newRecipeName","user","recipeToCopy","newIng","title","qty","unit","editing","eachRecipe","bind","addIngredient","delAllIngredient","delIngredient","addRecipe","remRecipe","removeAll","handleAddRecipe","handleAddIngTitle","handleAddIngQty","handleAddIngUnit","editRecipName","toggleAddRecipe","editIngredient","handleError","componentDidMount","msg","event","target","value","parseJwt","token","base64Url","split","base64","JSON","parse","window","atob","delete","errors","indexToDel","forEach","index","_id","recipeUpdated","splice","newName","put","map","ingredients","ingId","editedIng","recIndexToEdit","ingIndexToEdit","ing","ingIndex","render","auth","height","_user","loginMethod","loginIcon","length","name","fontFamily","width","borderRadius","letterSpacing","marginTop","propTypes","func","isRequired","object","mapStateToProps"],"mappings":";;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,UAAT,QAA2B,2BAA3B;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,WAAP,MAAwB,mBAAxB;AACA,OAAOC,UAAP,MAAuB,kBAAvB;AACA,OAAOC,QAAP,MAAqB,gBAArB;AACA,SAASC,eAAT,QAAgC,oBAAhC;AACA,OAAO,wBAAP;AACA,OAAOC,UAAP,MAAuB,YAAvB;AAEA,OAAOC,aAAP,MAA0B,qBAA1B;;AACA,MAAMC,SAAN,SAAwBX,SAAxB,CAAkC;AAChCY,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;;AADiB,SAoCnBC,aApCmB,GAoCHC,CAAC,IAAI;AACnBA,MAAAA,CAAC,CAACC,cAAF;AACA,WAAKH,KAAL,CAAWV,UAAX;AACD,KAvCkB;;AAAA,SA6DnBc,WA7DmB,GA6DNC,EAAD,IAAM;AAChBd,MAAAA,KAAK,CAACe,GAAN,2CAA6CD,EAA7C,GACCE,IADD,CACMC,GAAG,IAAE;AACT,aAAKC,QAAL,CAAc;AACZC,UAAAA,MAAM,EAACF,GAAG,CAACG;AADC,SAAd;AAGD,OALD;AAMD,KApEkB;;AAAA,SAqEnBC,eArEmB,GAqEAP,EAAD,IAAQ;AACxB;AACAd,MAAAA,KAAK,CAACe,GAAN,6CAA+CD,EAA/C,GACGE,IADH,CACQC,GAAG,IAAI;AACX,aAAKC,QAAL,CAAc;AACZI,UAAAA,UAAU,EAAEL,GAAG,CAACG,IADJ;AAEZG,UAAAA,QAAQ,EAAE;AAFE,SAAd;AAKAC,QAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ;AACAD,QAAAA,OAAO,CAACC,GAAR,CAAY,KAAKC,KAAL,CAAWJ,UAAvB;AACD,OATH,EASKK,KATL,CASWC,GAAG,IAAI;AACdJ,QAAAA,OAAO,CAACK,KAAR,CAAcD,GAAd;AACD,OAXH;AAYD,KAnFkB;;AAAA,SAqFnBE,cArFmB,GAqFF,MAAM;AACrB,WAAKZ,QAAL,CAAc;AACZK,QAAAA,QAAQ,EAAE;AADE,OAAd;AAGD,KAzFkB;;AAAA,SA2FnBQ,eA3FmB,GA2FD,MAAM;AACtB,WAAKb,QAAL,CAAc;AACZK,QAAAA,QAAQ,EAAE;AADE,OAAd;AAGD,KA/FkB;;AAAA,SAkInBS,UAlImB,GAkILC,MAAD,IAAY;AACvB,WAAKC,aAAL,CAAmBD,MAAnB;AACA,WAAKf,QAAL,CAAc;AACZiB,QAAAA,OAAO,EAAE,IADG;AAEZC,QAAAA,MAAM,EAAE;AAFI,OAAd;AAKD,KAzIkB;;AAAA,SAwJnBF,aAxJmB,GAwJFG,SAAD,IAAe;AAC7B;AACA;AACA,UAAIC,MAAM,GAACjC,UAAU,CAACkC,YAAY,CAACC,QAAb,CAAsBC,OAAtB,CAA8B,SAA9B,EAAwC,EAAxC,CAAD,CAAV,CAAwD,IAAxD,CAAX;AACAzC,MAAAA,KAAK,CAAC0C,IAAN,6CAAgDJ,MAAhD,GAA0DD,SAA1D,EACGrB,IADH,CACQC,GAAG,IAAI;AACX;AACA,aAAKC,QAAL,CAAc,EAAd;;AAGA,YAAID,GAAG,CAACG,IAAJ,CAASe,OAAT,KAAqB,KAAzB,EAAgC;AAC9B,cAAIQ,aAAa,GAAG1B,GAAG,CAACG,IAAJ,CAASwB,OAA7B;AACA,eAAK1B,QAAL,CAAc;AACZ2B,YAAAA,OAAO,EAAEF,aADG;AAEZG,YAAAA,aAAa,EAAE,EAFH;AAGZX,YAAAA,OAAO,EAAE;AAHG,WAAd,EAF8B,CAO9B;AAED;AACF,OAhBH,EAiBGR,KAjBH,CAiBSC,GAAG,IAAI;AACZJ,QAAAA,OAAO,CAACK,KAAR,CAAcD,GAAd;AACD,OAnBH;AAoBD,KAhLkB;;AAEjB,SAAKF,KAAL,GAAa;AACXqB,MAAAA,IAAI,EAAE,EADK;AAEXT,MAAAA,MAAM,EAAE,EAFG;AAGXnB,MAAAA,MAAM,EAAC,EAHI;AAIXG,MAAAA,UAAU,EAAE,EAJD;AAKXuB,MAAAA,OAAO,EAAE,EALE;AAMX;AACAG,MAAAA,YAAY,EAAE,EAPH;AAQXF,MAAAA,aAAa,EAAE,EARJ;AASXG,MAAAA,MAAM,EAAE;AAAEC,QAAAA,KAAK,EAAE,EAAT;AAAaC,QAAAA,GAAG,EAAE,EAAlB;AAAsBC,QAAAA,IAAI,EAAE;AAA5B,OATG;AAUXC,MAAAA,OAAO,EAAE,KAVE;AAWX9B,MAAAA,QAAQ,EAAE,CAXC,CAWC;AACZ;;AAZW,KAAb;AAeA,SAAK+B,UAAL,GAAkB,KAAKA,UAAL,CAAgBC,IAAhB,CAAqB,IAArB,CAAlB;AACA,SAAKC,aAAL,GAAqB,KAAKA,aAAL,CAAmBD,IAAnB,CAAwB,IAAxB,CAArB;AACA,SAAKE,gBAAL,GAAwB,KAAKA,gBAAL,CAAsBF,IAAtB,CAA2B,IAA3B,CAAxB;AACA,SAAKG,aAAL,GAAqB,KAAKA,aAAL,CAAmBH,IAAnB,CAAwB,IAAxB,CAArB;AACA,SAAKI,SAAL,GAAiB,KAAKA,SAAL,CAAeJ,IAAf,CAAoB,IAApB,CAAjB;AACA,SAAKK,SAAL,GAAiB,KAAKA,SAAL,CAAeL,IAAf,CAAoB,IAApB,CAAjB;AACA,SAAKM,SAAL,GAAiB,KAAKA,SAAL,CAAeN,IAAf,CAAoB,IAApB,CAAjB;AACA,SAAKO,eAAL,GAAuB,KAAKA,eAAL,CAAqBP,IAArB,CAA0B,IAA1B,CAAvB;AACA,SAAKQ,iBAAL,GAAyB,KAAKA,iBAAL,CAAuBR,IAAvB,CAA4B,IAA5B,CAAzB;AACA,SAAKS,eAAL,GAAuB,KAAKA,eAAL,CAAqBT,IAArB,CAA0B,IAA1B,CAAvB;AACA,SAAKU,gBAAL,GAAwB,KAAKA,gBAAL,CAAsBV,IAAtB,CAA2B,IAA3B,CAAxB;AACA,SAAKW,aAAL,GAAqB,KAAKA,aAAL,CAAmBX,IAAnB,CAAwB,IAAxB,CAArB;AACA,SAAKY,eAAL,GAAuB,KAAKA,eAAL,CAAqBZ,IAArB,CAA0B,IAA1B,CAAvB;AACA,SAAKa,cAAL,GAAsB,KAAKA,cAAL,CAAoBb,IAApB,CAAyB,IAAzB,CAAtB,CA9BiB,CA+BjB;;AACA,SAAKc,WAAL,GAAmB,KAAKA,WAAL,CAAiBd,IAAjB,CAAsB,IAAtB,CAAnB,CAhCiB,CAiCjB;AAED;;AAKDe,EAAAA,iBAAiB,GAAG;AAElBlE,IAAAA,eAAe;AACf,QAAI2C,IAAI,GAAC1C,UAAU,CAACkC,YAAY,CAACC,QAAb,CAAsBC,OAAtB,CAA8B,SAA9B,EAAwC,EAAxC,CAAD,CAAV,CAAwD,IAAxD,CAAT;AACAzC,IAAAA,KAAK,CAACe,GAAN,6CAA+CgC,IAA/C,GACE;AADF,KAEG/B,IAFH,CAESC,GAAD,IAAS;AACb;AACA;AACE;AACA;AACA;AACAO,MAAAA,OAAO,CAACC,GAAR,CAAYR,GAAG,CAACG,IAAhB;AACA,WAAKF,QAAL,CAAc;AAAC2B,QAAAA,OAAO,EAAE5B,GAAG,CAACG,IAAd;AAAoBkB,QAAAA,MAAM,EAAES;AAA5B,OAAd;AAIH,KAbH,EAaKpB,KAbL,CAaWC,GAAG,IAAI;AACdJ,MAAAA,OAAO,CAACK,KAAR,CAAcD,GAAd;AACD,KAfH;AAgBD;;AAoCDyC,EAAAA,WAAW,CAACE,GAAD,EAAM;AACf,SAAKrD,QAAL,CAAc;AACZiB,MAAAA,OAAO,EAAE,IADG;AAEZC,MAAAA,MAAM,EAAEmC;AAFI,KAAd;AAID;;AAEDJ,EAAAA,eAAe,GAAG;AAChB,SAAKjD,QAAL,CAAc;AACZmC,MAAAA,OAAO,EAAE,CAAC,KAAK3B,KAAL,CAAW2B;AADT,KAAd;AAGD;;AAEDU,EAAAA,iBAAiB,CAACS,KAAD,EAAQ;AACvB,SAAKtD,QAAL,CAAc;AACZ+B,MAAAA,MAAM,oBAAO,KAAKvB,KAAL,CAAWuB,MAAlB;AAA0BC,QAAAA,KAAK,EAAEsB,KAAK,CAACC,MAAN,CAAaC;AAA9C;AADM,KAAd;AAGD;;AACDV,EAAAA,eAAe,CAACQ,KAAD,EAAQ;AACrB,SAAKtD,QAAL,CAAc;AACZ+B,MAAAA,MAAM,oBAAO,KAAKvB,KAAL,CAAWuB,MAAlB;AAA0BE,QAAAA,GAAG,EAAEqB,KAAK,CAACC,MAAN,CAAaC;AAA5C;AADM,KAAd;AAGD;;AACDT,EAAAA,gBAAgB,CAACO,KAAD,EAAQ;AACtB,SAAKtD,QAAL,CAAc;AACZ+B,MAAAA,MAAM,oBAAO,KAAKvB,KAAL,CAAWuB,MAAlB;AAA0BG,QAAAA,IAAI,EAAEoB,KAAK,CAACC,MAAN,CAAaC;AAA7C;AADM,KAAd;AAGD;;AAEDZ,EAAAA,eAAe,CAACU,KAAD,EAAQ;AACrB,SAAKtD,QAAL,CAAc;AACZ4B,MAAAA,aAAa,EAAE0B,KAAK,CAACC,MAAN,CAAaC;AADhB,KAAd;AAGD;;AAWHC,EAAAA,QAAQ,CAACC,KAAD,EAAQ;AACZ,QAAI,CAACA,KAAL,EAAY;AAAE;AAAS;;AACvB,UAAMC,SAAS,GAAGD,KAAK,CAACE,KAAN,CAAY,GAAZ,EAAiB,CAAjB,CAAlB;AACA,UAAMC,MAAM,GAAGF,SAAS,CAACpC,OAAV,CAAkB,GAAlB,EAAuB,GAAvB,EAA4BA,OAA5B,CAAoC,GAApC,EAAyC,GAAzC,CAAf;AACA,WAAOuC,IAAI,CAACC,KAAL,CAAWC,MAAM,CAACC,IAAP,CAAYJ,MAAZ,CAAX,CAAP;AACH;;AAECpB,EAAAA,SAAS,GAAG;AACV,SAAKzB,aAAL,CAAmB;AAAEgB,MAAAA,KAAK,EAAE,KAAKxB,KAAL,CAAWoB;AAApB,KAAnB;AACA,SAAKqB,eAAL;AACD;;AA2BDP,EAAAA,SAAS,CAAC9C,EAAD,EAAK;AACZ;AACAd,IAAAA,KAAK,CAACoF,MAAN,gBAAqB,KAAK1D,KAAL,CAAWY,MAAhC,qBAAiDxB,EAAjD,GACGE,IADH,CACQC,GAAG,IAAI;AACX;AACA,WAAKC,QAAL,CAAc;AACZiB,QAAAA,OAAO,EAAElB,GAAG,CAACG,IAAJ,CAASe,OADN;AAEZC,QAAAA,MAAM,EAAEnB,GAAG,CAACG,IAAJ,CAASwB,OAAT,CAAiByC;AAFb,OAAd;;AAIA,UAAIpE,GAAG,CAACG,IAAJ,CAASe,OAAT,KAAqB,KAAzB,EAAgC;AAC9B,YAAImD,UAAU,GAAG,CAAC,CAAlB;AACA,aAAK5D,KAAL,CAAWmB,OAAX,CAAmB0C,OAAnB,CAA2B,UAAUtD,MAAV,EAAkBuD,KAAlB,EAAyB;AAClD,cAAIvD,MAAM,CAACwD,GAAP,KAAe3E,EAAnB,EAAuB;AACrBwE,YAAAA,UAAU,GAAGE,KAAb;AACD;AACF,SAJD,EAF8B,CAO9B;;AACA,YAAIE,aAAa,GAAG,KAAKhE,KAAL,CAAWmB,OAA/B;AACA6C,QAAAA,aAAa,CAACC,MAAd,CAAqBL,UAArB,EAAiC,CAAjC;AACA,aAAKpE,QAAL,CAAc;AACZ2B,UAAAA,OAAO,EAAE6C;AADG,SAAd;AAGD;AACF,KArBH,EAsBG/D,KAtBH,CAsBSC,GAAG,IAAI;AACZJ,MAAAA,OAAO,CAACK,KAAR,CAAcD,GAAd;AACD,KAxBH;AAyBD;;AACDsC,EAAAA,aAAa,CAACpD,EAAD,EAAK8E,OAAL,EAAc;AACzB5F,IAAAA,KAAK,CAAC6F,GAAN,gBAAkB,KAAKnE,KAAL,CAAWY,MAA7B,qBAA8CxB,EAA9C,GAAoD;AAAE,eAAS8E;AAAX,KAApD,EACG5E,IADH,CACQC,GAAG,IAAI;AACX;AACA,WAAKC,QAAL,CAAc;AACZiB,QAAAA,OAAO,EAAElB,GAAG,CAACG,IAAJ,CAASe,OADN;AAEZC,QAAAA,MAAM,EAAEnB,GAAG,CAACG,IAAJ,CAASwB,OAAT,CAAiByC;AAFb,OAAd;;AAIA,UAAIpE,GAAG,CAACG,IAAJ,CAASe,OAAT,KAAqB,KAAzB,EAAgC;AAC9B,YAAIuD,aAAa,GAAG,KAAKhE,KAAL,CAAWmB,OAAX,CAAmBiD,GAAnB,CAClB7D,MAAM,IAAKA,MAAM,CAACwD,GAAP,KAAe3E,EAAhB,GACRmB,MADQ,GACChB,GAAG,CAACG,IAAJ,CAASwB,OAFF,CAApB;AAIA,aAAK1B,QAAL,CAAc;AACZ2B,UAAAA,OAAO,EAAE6C;AADG,SAAd;AAGD;AACF,KAhBH,EAiBG/D,KAjBH,CAiBSC,GAAG,IAAI;AACZJ,MAAAA,OAAO,CAACK,KAAR,CAAcD,GAAd;AACD,KAnBH;AAoBD;;AACD4B,EAAAA,aAAa,CAAC1C,EAAD,EAAK;AAEhB;AACAd,IAAAA,KAAK,CAAC0C,IAAN,gBAAmB,KAAKhB,KAAL,CAAWY,MAA9B,qBAA+CxB,EAA/C,GAAqD,KAAKY,KAAL,CAAWuB,MAAhE,EACGjC,IADH,CACQC,GAAG,IAAI;AAEX;AACA,WAAKC,QAAL,CAAc;AACZiB,QAAAA,OAAO,EAAElB,GAAG,CAACG,IAAJ,CAASe,OADN;AAEZC,QAAAA,MAAM,EAAEnB,GAAG,CAACG,IAAJ,CAASwB,OAAT,CAAiByC;AAFb,OAAd;;AAIA,UAAIpE,GAAG,CAACG,IAAJ,CAASe,OAAT,KAAqB,KAAzB,EAAgC;AAC9B;AACA,YAAIuD,aAAa,GAAG,KAAKhE,KAAL,CAAWmB,OAAX,CAAmBiD,GAAnB,CAAuB,UAAU7D,MAAV,EAAkB;AAC3D,cAAIA,MAAM,CAACwD,GAAP,KAAe3E,EAAnB,EAAuB;AACrB;AACA,gBAAImC,MAAM,GAAGhC,GAAG,CAACG,IAAJ,CAASwB,OAAT,CAAiBmD,WAA9B;AACA,qCAAY9D,MAAZ;AAAoB8D,cAAAA,WAAW,EAAE9C;AAAjC;AACD,WAJD,MAIO;AACL,mBAAOhB,MAAP;AACD;AACF,SARmB,CAApB;AASA,aAAKf,QAAL,CAAc;AACZ2B,UAAAA,OAAO,EAAE6C,aADG;AAEZzC,UAAAA,MAAM,EAAE;AAAEC,YAAAA,KAAK,EAAE,EAAT;AAAaC,YAAAA,GAAG,EAAE,CAAlB;AAAqBC,YAAAA,IAAI,EAAE;AAA3B;AAFI,SAAd;AAID;AACF,KAxBH,EAyBGzB,KAzBH,CAyBSC,GAAG,IAAI;AACZJ,MAAAA,OAAO,CAACK,KAAR,CAAcD,GAAd;AACD,KA3BH;AA4BD;;AAED8B,EAAAA,aAAa,CAAC5C,EAAD,EAAKkF,KAAL,EAAY;AACvBhG,IAAAA,KAAK,CAACoF,MAAN,gBAAqB,KAAK1D,KAAL,CAAWY,MAAhC,qBAAiDxB,EAAjD,cAAuDkF,KAAvD,GACGhF,IADH,CACQC,GAAG,IAAI;AACX;AACA,WAAKC,QAAL,CAAc;AACZiB,QAAAA,OAAO,EAAElB,GAAG,CAACG,IAAJ,CAASe,OADN;AAEZC,QAAAA,MAAM,EAAEnB,GAAG,CAACG,IAAJ,CAASwB,OAAT,CAAiByC;AAFb,OAAd;;AAIA,UAAIpE,GAAG,CAACG,IAAJ,CAASe,OAAT,KAAqB,KAAzB,EAAgC;AAC9B,YAAIuD,aAAa,GAAG,KAAKhE,KAAL,CAAWmB,OAAX,CAAmBiD,GAAnB,CAAuB,UAAU7D,MAAV,EAAkB;AAC3D,cAAIA,MAAM,CAACwD,GAAP,KAAe3E,EAAnB,EAAuB;AACrB;AACA,gBAAImC,MAAM,GAAGhC,GAAG,CAACG,IAAJ,CAASwB,OAAT,CAAiBmD,WAA9B;AACA,qCAAY9D,MAAZ;AAAoB8D,cAAAA,WAAW,EAAE9C;AAAjC;AACD,WAJD,MAIO;AACL,mBAAOhB,MAAP;AACD;AACF,SARmB,CAApB;AASA,aAAKf,QAAL,CAAc;AACZ2B,UAAAA,OAAO,EAAE6C;AADG,SAAd;AAGD;AACF,KArBH,EAsBG/D,KAtBH,CAsBSC,GAAG,IAAI;AACZJ,MAAAA,OAAO,CAACK,KAAR,CAAcD,GAAd;AACD,KAxBH;AAyBD;;AAEDwC,EAAAA,cAAc,CAACtD,EAAD,EAAKkF,KAAL,EAAYC,SAAZ,EAAuB;AACnCjG,IAAAA,KAAK,CAAC6F,GAAN,gBAAkB,KAAKnE,KAAL,CAAWY,MAA7B,qBAA8CxB,EAA9C,cAAoDkF,KAApD,GAA6DC,SAA7D,EACGjF,IADH,CACQC,GAAG,IAAI;AACX;AACA,WAAKC,QAAL,CAAc;AACZiB,QAAAA,OAAO,EAAElB,GAAG,CAACG,IAAJ,CAASe,OADN;AAEZC,QAAAA,MAAM,EAAEnB,GAAG,CAACG,IAAJ,CAASwB,OAAT,CAAiByC;AAFb,OAAd;;AAIA,UAAIpE,GAAG,CAACG,IAAJ,CAASe,OAAT,KAAqB,KAAzB,EAAgC;AAC9B,YAAI+D,cAAc,GAAG,CAAC,CAAtB;AACA,YAAIC,cAAc,GAAG,CAAC,CAAtB;AACA,aAAKzE,KAAL,CAAWmB,OAAX,CAAmB0C,OAAnB,CAA2B,UAAUtD,MAAV,EAAkBuD,KAAlB,EAAyB;AAClD,cAAIvD,MAAM,CAACwD,GAAP,KAAe3E,EAAnB,EAAuB;AACrBoF,YAAAA,cAAc,GAAGV,KAAjB;AACAvD,YAAAA,MAAM,CAAC8D,WAAP,CAAmBR,OAAnB,CAA2B,UAAUa,GAAV,EAAeC,QAAf,EAAyB;AAClD,kBAAID,GAAG,CAACX,GAAJ,KAAYO,KAAhB,EAAuB;AACrBG,gBAAAA,cAAc,GAAGE,QAAjB;AACD;AACF,aAJD;AAKD;AACF,SATD;AAWA,YAAIX,aAAa,GAAG,KAAKhE,KAAL,CAAWmB,OAA/B;AACA6C,QAAAA,aAAa,CAACQ,cAAD,CAAb,CAA8BH,WAA9B,CAA0CI,cAA1C,IAA4DlF,GAAG,CAACG,IAAJ,CAASwB,OAArE,CAf8B,CAgB9B;;AACA,aAAK1B,QAAL,CAAc;AACZ2B,UAAAA,OAAO,EAAE6C;AADG,SAAd;AAID;AAEF,KA9BH,EA+BG/D,KA/BH,CA+BSC,GAAG,IAAI;AACZJ,MAAAA,OAAO,CAACK,KAAR,CAAcD,GAAd;AACD,KAjCH;AAkCD;;AACDiC,EAAAA,SAAS,GAAG;AACV7D,IAAAA,KAAK,CAACoF,MAAN,gBAAqB,KAAK1D,KAAL,CAAWY,MAAhC,oBACGtB,IADH,CACQC,GAAG,IAAI;AACX;AACA,WAAKC,QAAL,CAAc;AACZiB,QAAAA,OAAO,EAAElB,GAAG,CAACG,IAAJ,CAASe,OADN;AAEZC,QAAAA,MAAM,EAAEnB,GAAG,CAACG,IAAJ,CAASwB,OAAT,CAAiByC;AAFb,OAAd;;AAIA,UAAIpE,GAAG,CAACG,IAAJ,CAASe,OAAT,KAAqB,KAAzB,EAAgC;AAC9B,aAAKjB,QAAL,CAAc;AACZ2B,UAAAA,OAAO,EAAE;AADG,SAAd;AAGD;AACF,KAZH,EAaGlB,KAbH,CAaSC,GAAG,IAAI;AACZJ,MAAAA,OAAO,CAACK,KAAR,CAAcD,GAAd;AACD,KAfH;AAgBD;;AACD6B,EAAAA,gBAAgB,CAAC3C,EAAD,EAAK;AACnBd,IAAAA,KAAK,CAACoF,MAAN,gBAAqB,KAAK1D,KAAL,CAAWY,MAAhC,8BAA0DxB,EAA1D,GACGE,IADH,CACQC,GAAG,IAAI;AACX;AACA,WAAKC,QAAL,CAAc;AACZiB,QAAAA,OAAO,EAAElB,GAAG,CAACG,IAAJ,CAASe,OADN;AAEZC,QAAAA,MAAM,EAAEnB,GAAG,CAACG,IAAJ,CAASwB,OAAT,CAAiByC;AAFb,OAAd;;AAIA,UAAIpE,GAAG,CAACG,IAAJ,CAASe,OAAT,KAAqB,KAAzB,EAAgC;AAC9B,YAAIuD,aAAa,GAAG,KAAKhE,KAAL,CAAWmB,OAAX,CAAmBiD,GAAnB,CAAuB,UAAU7D,MAAV,EAAkB;AAC3D,cAAIA,MAAM,CAACwD,GAAP,KAAe3E,EAAnB,EAAuB;AACrB;AACA,gBAAImC,MAAM,GAAGhC,GAAG,CAACG,IAAJ,CAASwB,OAAT,CAAiBmD,WAA9B;AACA,qCAAY9D,MAAZ;AAAoB8D,cAAAA,WAAW,EAAE9C;AAAjC;AACD,WAJD,MAIO;AACL,mBAAOhB,MAAP;AACD;AACF,SARmB,CAApB;AASA,aAAKf,QAAL,CAAc;AACZ2B,UAAAA,OAAO,EAAE6C;AADG,SAAd;AAGD;AACF,KArBH,EAsBG/D,KAtBH,CAsBSC,GAAG,IAAI;AACZJ,MAAAA,OAAO,CAACK,KAAR,CAAcD,GAAd;AACD,KAxBH;AAyBD;;AAED0B,EAAAA,UAAU,CAACrB,MAAD,EAAS;AACjB,WACE,oBAAC,UAAD;AACE,MAAA,GAAG,EAAEA,MAAM,CAACwD,GADd;AAEE,MAAA,EAAE,EAAExD,MAAM,CAACwD,GAFb;AAGE,MAAA,KAAK,EAAExD,MAAM,CAACiB,KAHhB;AAIE,MAAA,WAAW,EAAEjB,MAAM,CAAC8D,WAJtB;AAKE,MAAA,MAAM,EAAE,KAAKvC,aALf;AAME,MAAA,SAAS,EAAE,KAAKI,SANlB;AAOE,MAAA,SAAS,EAAE,KAAKH,gBAPlB;AAQE,MAAA,MAAM,EAAE,KAAKC,aARf;AASE,MAAA,cAAc,EAAE,KAAKU,cATvB;AAUE,MAAA,cAAc,EAAE,KAAKL,iBAVvB;AAWE,MAAA,YAAY,EAAE,KAAKC,eAXrB;AAYE,MAAA,aAAa,EAAE,KAAKC,gBAZtB;AAaE,MAAA,QAAQ,EAAE,KAAKC,aAbjB;AAcE,MAAA,QAAQ,EAAE,KAAKxC,KAAL,CAAWH,QAdvB;AAeE,MAAA,UAAU,EAAE,KAAKS,UAfnB,CAgBA;AAhBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF;AAoBD;;AAEDsE,EAAAA,MAAM,GAAG;AAAA,UACCvD,IADD,GACU,KAAKtC,KAAL,CAAW8F,IADrB,CACCxD,IADD;AAGP,WACE;AAAK,MAAA,KAAK,EAAE;AAAEyD,QAAAA,MAAM,EAAE;AAAV,OAAZ;AAAgC,MAAA,SAAS,EAAC,0BAA1C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAK,MAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAK,MAAA,SAAS,EAAC,mCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACC,oBAAC,QAAD;AAAU,MAAA,cAAc,EAAE,KAAK1E,cAA/B;AACH,MAAA,eAAe,EAAE,KAAKC,eADnB;AAGH,MAAA,OAAO,EAAE,KAAKL,KAAL,CAAWY,MAHjB;AAIH,MAAA,eAAe,EAAE,KAAKjB,eAJnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADD,EAOE;AAAK,MAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACJ,oBAAC,aAAD;AAAe,MAAA,QAAQ,EAAE,KAAKyC,eAA9B;AAA+C,MAAA,YAAY,EAAE,KAAKH,SAAlE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADI,CAPF,EAWH,KAAKjC,KAAL,CAAWH,QAAX,KAAwB,CAAxB,IAEG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAEE;AAAI,MAAA,SAAS,EAAC,MAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAsB,KAAKV,WAAL,CAAiB,KAAKa,KAAL,CAAWJ,UAAX,CAAsB,CAAtB,EAAyBmF,KAAzB,CAA+B,KAA/B,CAAjB,CAAtB,eAFF,EAGE;AAAK,MAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAHF,CAbA,EAoBH,KAAK/E,KAAL,CAAWH,QAAX,KAAwB,CAAxB,IACE,oBAAC,WAAD;AACC,MAAA,WAAW,EAAE,KAAK8C,WADnB;AAEC,MAAA,QAAQ,EAAE,KAAK3C,KAAL,CAAWqB,IAFtB;AAGC,MAAA,SAAS,EAAE,KAAKrB,KAAL,CAAWgF,WAHvB;AAIC,MAAA,QAAQ,EAAE,KAAKhF,KAAL,CAAWiF,SAJtB;AAKC,MAAA,MAAM,EAAE,KAAKjF,KAAL,CAAWY,MALpB;AAMC,MAAA,UAAU,EAAE,KAAKZ,KAAL,CAAWmB,OAAX,CAAmB+D,MANhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MArBC,EA6BE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBA7BF,OA6BqB7D,IAAI,CAAC8D,IAAL,CAAU/B,KAAV,CAAgB,GAAhB,EAAqB,CAArB,CA7BrB,EA8BE;AAAG,MAAA,SAAS,EAAC,mCAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2CACmC,GADnC,EAEE;AAAM,MAAA,KAAK,EAAE;AAAEgC,QAAAA,UAAU,EAAE;AAAd,OAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAFF,sBA9BF,CADF,EAoCE;AACE,MAAA,KAAK,EAAE;AACLC,QAAAA,KAAK,EAAE,OADF;AAELC,QAAAA,YAAY,EAAE,KAFT;AAGLC,QAAAA,aAAa,EAAE,OAHV;AAILC,QAAAA,SAAS,EAAE;AAJN,OADT;AAOE,MAAA,OAAO,EAAE,KAAKxG,aAPhB;AAQE,MAAA,SAAS,EAAC,gEARZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBApCF,CADF,CADF,CADF;AAuDD;;AApc+B;;AAuclCH,SAAS,CAAC4G,SAAV,GAAsB;AACpBpH,EAAAA,UAAU,EAAEF,SAAS,CAACuH,IAAV,CAAeC,UADP;AAEpBd,EAAAA,IAAI,EAAE1G,SAAS,CAACyH,MAAV,CAAiBD;AAFH,CAAtB;;AAKA,MAAME,eAAe,GAAG7F,KAAK,KAAK;AAChC6E,EAAAA,IAAI,EAAE7E,KAAK,CAAC6E;AADoB,CAAL,CAA7B;;AAIA,eAAezG,OAAO,CACpByH,eADoB,EAEpB;AAAExH,EAAAA;AAAF,CAFoB,CAAP,CAGbQ,SAHa,CAAf","sourcesContent":["import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\nimport { logoutUser } from \"../../actions/authActions\";\nimport axios from \"axios\";\nimport UserProfile from '../../UserProfile';\nimport RecipeCard from '../../RecipeCard';\nimport UserMenu from '../../UserMenu';\nimport { loadProgressBar } from 'axios-progress-bar';\nimport '../../style.module.css'\nimport jwt_decode from \"jwt-decode\";\n\nimport AddRecipeForm from '../../AddRecipeForm';\nclass Dashboard extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      user: '',\n      userID: '',\n      friend:'',\n      friendUser: {},\n      recipes: [],\n      //friendRecipes: [],\n      recipeToCopy: {},\n      newRecipeName: '',\n      newIng: { title: '', qty: '', unit: '' },\n      editing: false,\n      pageCtrl: 0 //allows users to toggle between pages\n      //addRecipeStyleState: {display:'none'}\n    };\n\n    this.eachRecipe = this.eachRecipe.bind(this);\n    this.addIngredient = this.addIngredient.bind(this);\n    this.delAllIngredient = this.delAllIngredient.bind(this);\n    this.delIngredient = this.delIngredient.bind(this);\n    this.addRecipe = this.addRecipe.bind(this);\n    this.remRecipe = this.remRecipe.bind(this);\n    this.removeAll = this.removeAll.bind(this);\n    this.handleAddRecipe = this.handleAddRecipe.bind(this);\n    this.handleAddIngTitle = this.handleAddIngTitle.bind(this);\n    this.handleAddIngQty = this.handleAddIngQty.bind(this);\n    this.handleAddIngUnit = this.handleAddIngUnit.bind(this);\n    this.editRecipName = this.editRecipName.bind(this);\n    this.toggleAddRecipe = this.toggleAddRecipe.bind(this);\n    this.editIngredient = this.editIngredient.bind(this);\n    //this.setLoginMethod = this.setLoginMethod.bind(this);\n    this.handleError = this.handleError.bind(this);\n    //this.renderAddRecipeForm = this.renderAddRecipeForm.bind(this);\n\n  }\n  onLogoutClick = e => {\n    e.preventDefault();\n    this.props.logoutUser();\n  };\n  componentDidMount() {\n\n    loadProgressBar();\n    let user=jwt_decode(localStorage.jwtToken.replace(\"Bearer \",\"\"))['id']\n    axios.get(`http://localhost:8080/api/recipes/${user}`)\n      //axios.get(`/api/${this.state.userID}`)\n      .then((res) => {\n        ////console.log(res.data);\n        ////console.log((typeof(res.data)==='object') && res.data.user.id!==undefined);\n          //console.log('User found');\n          //console.log(res.data);\n          //this.setState({userID:res.data._id});\n          console.log(res.data)\n          this.setState({recipes: res.data, userID: user})\n\n\n\n      }).catch(err => {\n        console.error(err);\n      });\n  }\n  getUserByID=(id)=>{\n    axios.get(`http://localhost:8080/api/users/${id}`)\n    .then(res=>{\n      this.setState({\n        friend:res.data\n      })\n    })\n  }\n  getFriendRecipe = (id) => {\n    //console.log (id);\n    axios.get(`http://localhost:8080/api/recipes/${id}`)\n      .then(res => {\n        this.setState({\n          friendUser: res.data,\n          pageCtrl: 1\n          \n        });\n        console.log(\"FriendUser Here\")\n        console.log(this.state.friendUser)\n      }).catch(err => {\n        console.error(err);\n      });\n  }\n\n  toggleMyRecipe = () => {\n    this.setState({\n      pageCtrl: 0\n    });\n  }\n\n  toggleMyProfile = () => {\n    this.setState({\n      pageCtrl: 2\n    });\n  }\n  handleError(msg) {\n    this.setState({\n      isError: true,\n      errMsg: msg\n    })\n  }\n\n  toggleAddRecipe() {\n    this.setState({\n      editing: !this.state.editing\n    });\n  }\n\n  handleAddIngTitle(event) {\n    this.setState({\n      newIng: { ...this.state.newIng, title: event.target.value }\n    });\n  }\n  handleAddIngQty(event) {\n    this.setState({\n      newIng: { ...this.state.newIng, qty: event.target.value }\n    });\n  }\n  handleAddIngUnit(event) {\n    this.setState({\n      newIng: { ...this.state.newIng, unit: event.target.value }\n    });\n  }\n\n  handleAddRecipe(event) {\n    this.setState({\n      newRecipeName: event.target.value\n    });\n  }\n  copyRecipe = (recipe) => {\n    this.addRecipeBase(recipe);\n    this.setState({\n      isError: true,\n      errMsg: \"Recipe copied!\"\n\n    })\n  }\n  \n\nparseJwt(token) {\n    if (!token) { return; }\n    const base64Url = token.split('.')[1];\n    const base64 = base64Url.replace('-', '+').replace('_', '/');\n    return JSON.parse(window.atob(base64));\n}\n\n  addRecipe() {\n    this.addRecipeBase({ title: this.state.newRecipeName });\n    this.toggleAddRecipe();\n  }\n\n  addRecipeBase = (newRecipe) => {\n    //var newRecipe={title:this.state.newRecipeName, ingredients:[{}]};\n    //var newRecipe={title:this.state.newRecipeName};\n    let userID=jwt_decode(localStorage.jwtToken.replace(\"Bearer \",\"\"))['id']\n    axios.post(`http://localhost:8080/api/recipes/${userID}`, newRecipe)\n      .then(res => {\n        //console.log(res.data);\n        this.setState({\n\n        });\n        if (res.data.isError === false) {\n          var updatedRecipe = res.data.content;\n          this.setState({\n            recipes: updatedRecipe,\n            newRecipeName: '',\n            isError: false\n          });\n          //console.log(this.state.recipes);\n\n        }\n      })\n      .catch(err => {\n        console.error(err);\n      });\n  }\n  remRecipe(id) {\n    //post to the server and delete from the database; delete the same item locally\n    axios.delete(`/api/${this.state.userID}/recipe/${id}`)\n      .then(res => {\n        //console.log(res.data);\n        this.setState({\n          isError: res.data.isError,\n          errMsg: res.data.content.errors\n        });\n        if (res.data.isError === false) {\n          var indexToDel = -1;\n          this.state.recipes.forEach(function (recipe, index) {\n            if (recipe._id === id) {\n              indexToDel = index;\n            }\n          });\n          //console.log(`index to del is ${indexToDel}`);\n          var recipeUpdated = this.state.recipes;\n          recipeUpdated.splice(indexToDel, 1);\n          this.setState({\n            recipes: recipeUpdated\n          });\n        }\n      })\n      .catch(err => {\n        console.error(err);\n      });\n  }\n  editRecipName(id, newName) {\n    axios.put(`/api/${this.state.userID}/recipe/${id}`, { 'title': newName })\n      .then(res => {\n        //console.log(res.data);\n        this.setState({\n          isError: res.data.isError,\n          errMsg: res.data.content.errors\n        });\n        if (res.data.isError === false) {\n          var recipeUpdated = this.state.recipes.map(\n            recipe => (recipe._id !== id) ?\n              recipe : res.data.content\n          );\n          this.setState({\n            recipes: recipeUpdated\n          });\n        }\n      })\n      .catch(err => {\n        console.error(err);\n      });\n  }\n  addIngredient(id) {\n\n    //send new ingredient to the database, and the id of the recipe being added\n    axios.post(`/api/${this.state.userID}/recipe/${id}`, this.state.newIng)\n      .then(res => {\n\n        //console.log(res.data);\n        this.setState({\n          isError: res.data.isError,\n          errMsg: res.data.content.errors\n        });\n        if (res.data.isError === false) {\n          //var newIng = res.data.ingredients;\n          var recipeUpdated = this.state.recipes.map(function (recipe) {\n            if (recipe._id === id) {\n              //var addedIng=recipe.ingredients.concat(newIng);\n              var newIng = res.data.content.ingredients;\n              return { ...recipe, ingredients: newIng };\n            } else {\n              return recipe;\n            }\n          });\n          this.setState({\n            recipes: recipeUpdated,\n            newIng: { title: '', qty: 0, unit: '' }\n          });\n        }\n      })\n      .catch(err => {\n        console.error(err);\n      });\n  }\n\n  delIngredient(id, ingId) {\n    axios.delete(`/api/${this.state.userID}/recipe/${id}/${ingId}`)\n      .then(res => {\n        //console.log(res.data);\n        this.setState({\n          isError: res.data.isError,\n          errMsg: res.data.content.errors\n        });\n        if (res.data.isError === false) {\n          var recipeUpdated = this.state.recipes.map(function (recipe) {\n            if (recipe._id === id) {\n              //var addedIng=recipe.ingredients.concat(newIng);\n              var newIng = res.data.content.ingredients;\n              return { ...recipe, ingredients: newIng };\n            } else {\n              return recipe;\n            }\n          });\n          this.setState({\n            recipes: recipeUpdated\n          });\n        }\n      })\n      .catch(err => {\n        console.error(err);\n      });\n  }\n\n  editIngredient(id, ingId, editedIng) {\n    axios.put(`/api/${this.state.userID}/recipe/${id}/${ingId}`, editedIng)\n      .then(res => {\n        //console.log(res.data);\n        this.setState({\n          isError: res.data.isError,\n          errMsg: res.data.content.errors\n        });\n        if (res.data.isError === false) {\n          var recIndexToEdit = -1;\n          var ingIndexToEdit = -1;\n          this.state.recipes.forEach(function (recipe, index) {\n            if (recipe._id === id) {\n              recIndexToEdit = index;\n              recipe.ingredients.forEach(function (ing, ingIndex) {\n                if (ing._id === ingId) {\n                  ingIndexToEdit = ingIndex;\n                }\n              });\n            }\n          });\n\n          var recipeUpdated = this.state.recipes;\n          recipeUpdated[recIndexToEdit].ingredients[ingIndexToEdit] = res.data.content;\n          //console.log(recipeUpdated);\t\n          this.setState({\n            recipes: recipeUpdated\n          });\n\n        }\n\n      })\n      .catch(err => {\n        console.error(err);\n      });\n  }\n  removeAll() {\n    axios.delete(`/api/${this.state.userID}/recipeDelAll`)\n      .then(res => {\n        //console.log (res.data);\n        this.setState({\n          isError: res.data.isError,\n          errMsg: res.data.content.errors\n        });\n        if (res.data.isError === false) {\n          this.setState({\n            recipes: [],\n          });\n        }\n      })\n      .catch(err => {\n        console.error(err);\n      });\n  }\n  delAllIngredient(id) {\n    axios.delete(`/api/${this.state.userID}/recipeDelAllIng/${id}`)\n      .then(res => {\n        //console.log(res.data);\n        this.setState({\n          isError: res.data.isError,\n          errMsg: res.data.content.errors\n        });\n        if (res.data.isError === false) {\n          var recipeUpdated = this.state.recipes.map(function (recipe) {\n            if (recipe._id === id) {\n              //var addedIng=recipe.ingredients.concat(newIng);\n              var newIng = res.data.content.ingredients;\n              return { ...recipe, ingredients: newIng };\n            } else {\n              return recipe;\n            }\n          });\n          this.setState({\n            recipes: recipeUpdated\n          });\n        }\n      })\n      .catch(err => {\n        console.error(err);\n      });\n  }\n\n  eachRecipe(recipe) {\n    return (\n      <RecipeCard\n        key={recipe._id}\n        id={recipe._id}\n        title={recipe.title}\n        ingredients={recipe.ingredients}\n        addIng={this.addIngredient}\n        remRecipe={this.remRecipe}\n        delAllIng={this.delAllIngredient}\n        delIng={this.delIngredient}\n        editIngredient={this.editIngredient}\n        handleIngTitle={this.handleAddIngTitle}\n        handleIngQty={this.handleAddIngQty}\n        handleIngUnit={this.handleAddIngUnit}\n        saveEdit={this.editRecipName}\n        pageCtrl={this.state.pageCtrl}\n        copyRecipe={this.copyRecipe}\n      //curRecipe = {recipe}\n      ></RecipeCard>\n    );\n  }\n\n  render() {\n    const { user } = this.props.auth;\n\n    return (\n      <div style={{ height: \"75vh\" }} className=\"container valign-wrapper\">\n        <div className=\"row\">\n          <div className=\"landing-copy col s12 center-align\">\n            <h4>\n            {<UserMenu toggleMyRecipe={this.toggleMyRecipe}\n          toggleMyProfile={this.toggleMyProfile}\n\n          curUser={this.state.userID}\n          getFriendRecipe={this.getFriendRecipe}\n        />}\n            {(<div className=\"mt-4\">\n          <AddRecipeForm onChange={this.handleAddRecipe} onSaveButton={this.addRecipe} />\n        </div>)}\n\n        {this.state.pageCtrl === 1 &&\n          (\n            <div>\n              \n              <h3 className=\"mt-2\">{this.getUserByID(this.state.friendUser[0]._user['_id'])}'s Recipes</h3>\n              <div className=\"row\">\n\n              </div>\n            </div>)}\n        {this.state.pageCtrl === 2 &&\n          (<UserProfile\n            handleError={this.handleError}\n            userInfo={this.state.user}\n            loginType={this.state.loginMethod}\n            userIcon={this.state.loginIcon}\n            userID={this.state.userID}\n            numRecipes={this.state.recipes.length} />)}\n\n              <b>Hey there,</b> {user.name.split(\" \")[0]}\n              <p className=\"flow-text grey-text text-darken-1\">\n                You are logged into a full-stack{\" \"}\n                <span style={{ fontFamily: \"monospace\" }}>MERN</span> app üëè\n              </p>\n            </h4>\n            <button\n              style={{\n                width: \"150px\",\n                borderRadius: \"3px\",\n                letterSpacing: \"1.5px\",\n                marginTop: \"1rem\"\n              }}\n              onClick={this.onLogoutClick}\n              className=\"btn btn-large waves-effect waves-light hoverable blue accent-3\"\n            >\n              Logout\n            </button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nDashboard.propTypes = {\n  logoutUser: PropTypes.func.isRequired,\n  auth: PropTypes.object.isRequired\n};\n\nconst mapStateToProps = state => ({\n  auth: state.auth\n});\n\nexport default connect(\n  mapStateToProps,\n  { logoutUser }\n)(Dashboard);\n"]},"metadata":{},"sourceType":"module"}